<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Emergency Doctor Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="images/icon-192.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- ================= SPLASH ================= -->
<div id="splashScreen" class="splash">
  <img src="images/capa.jpg" alt="Emergency Doctor Simulator" />
  <div class="splashHint">Toque para iniciar</div>
</div>

<script>
  (function(){
    const splash = document.getElementById("splashScreen");
    const close = () => splash.remove();
    ["click","touchstart","pointerdown","keydown"].forEach(e=>{
      splash.addEventListener(e, close, { once:true });
    });
  })();
</script>

<div class="app">

<!-- ================= TOPBAR ================= -->
<header class="topbar">
  <div>
    <div class="brand-title">Emergency Doctor Simulator</div>
    <div class="brand-sub">Simulador de Pronto-Socorro</div>
  </div>
  <div class="top-actions">
    <button id="btnRanking" class="btn">Ranking</button>
    <button id="btnHelp" class="btn">Ajuda</button>
  </div>
</header>

<!-- ================= HOME ================= -->
<section class="screen active" data-screen="home">
  <div class="panel">
    <h1>Bem-vindo(a), Doutor(a)</h1>
    <button id="btnNewGame" class="btn primary">Novo jogo</button>
    <button id="btnContinue" class="btn">Continuar</button>
  </div>
</section>

<!-- ================= PROFILE ================= -->
<section class="screen" data-screen="profile">
  <div class="panel">
    <h2>Criar Perfil</h2>
    <input id="inputName" placeholder="Seu nome" />
    <div class="avatarGrid">
      <button class="avatarCard" data-avatar="images/avatar1.png"><img src="images/avatar1.png"></button>
      <button class="avatarCard" data-avatar="images/avatar2.png"><img src="images/avatar2.png"></button>
      <button class="avatarCard" data-avatar="images/avatar3.png"><img src="images/avatar3.png"></button>
    </div>
    <button id="btnStartFromProfile" class="btn primary">Entrar</button>
  </div>
</section>

<!-- ================= INTRO ================= -->
<section class="screen" data-screen="intro">
  <div class="panel">
    <h2>Diretor do Hospital</h2>
    <div id="directorText"></div>
    <button id="btnIntroContinue" class="btn primary">Ir ao consultório</button>
  </div>
</section>

<!-- ================= OFFICE ================= -->
<section class="screen" data-screen="office">
  <div class="panel consultorioPanel">
    <div class="officeHeader">
      <img id="uiAvatar" class="officeAvatar" />
      <div>
        <div id="uiName"></div>
        <div id="uiRank"></div>
      </div>
      <div class="timer">⏱ <span id="caseTimer">00:00</span></div>
    </div>

    <div class="stats">
      <div>Pontos: <b id="uiPoints">0</b></div>
      <div>Casos: <b id="uiCases">0</b></div>
      <div>Óbitos: <b id="uiDeaths">0</b></div>
    </div>

    <button id="btnNextCase" class="btn primary">Iniciar Plantão</button>
  </div>
</section>

<!-- ================= CASE ================= -->
<section class="screen" data-screen="case">
  <div class="panel">
    <h2 id="caseTitle"></h2>
    <div class="caseCard">
      <div id="caseStatus"></div>
      <div><b>Sinais vitais:</b> <span id="caseVitals"></span></div>
    </div>

    <button id="btnExams" class="btn primary">Solicitar Exames</button>
    <button id="btnToDiagnosis" class="btn">Escolher Diagnóstico</button>
  </div>
</section>

<!-- ================= EXAMS ================= -->
<section class="screen" data-screen="exams">
  <div class="panel">
    <h2>Exames</h2>
    <div id="examList"></div>
    <button id="btnBackCase" class="btn">Voltar</button>
  </div>
</section>

<!-- ================= RESULTS ================= -->
<section class="screen" data-screen="results">
  <div class="panel">
    <h2>Resultados</h2>
    <div id="examResults"></div>
    <button id="btnReturnCase" class="btn primary">Voltar ao Caso</button>
  </div>
</section>

<!-- ================= DIAGNOSIS ================= -->
<section class="screen" data-screen="diagnosis">
  <div class="panel">
    <h2>Escolha o Diagnóstico</h2>
    <div id="diagnosisList"></div>
    <button id="btnToConduct" class="btn primary">Confirmar Diagnóstico</button>
  </div>
</section>

<!-- ================= CONDUCT ================= -->
<section class="screen" data-screen="conduct">
  <div class="panel">
    <h2>Escolha a Conduta</h2>
    <div id="conductList"></div>
    <button id="btnFinalizeCase" class="btn primary">Finalizar Caso</button>
  </div>
</section>

<!-- ================= DEATH ================= -->
<section class="screen" data-screen="death">
  <div class="panel death">
    <h1>Óbito</h1>
    <p id="deathReason"></p>
    <button id="btnBackOffice" class="btn">Voltar</button>
  </div>
</section>

<!-- ================= MODALS ================= -->
<div id="rankingModal" class="modal hidden">
  <div class="modalCard">
    <h2>Ranking</h2>
    <div id="rankingList"></div>
    <button id="btnCloseRanking" class="btn">Fechar</button>
  </div>
</div>

<div id="helpModal" class="modal hidden">
  <div class="modalCard">
    <h2>Ajuda</h2>
    <p>Tome decisões clínicas corretas e dentro do tempo.</p>
    <button id="btnCloseHelp" class="btn">Fechar</button>
  </div>
</div>

</div>

<script src="script.js"></script>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>

</body>
</html>
