<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Emergency Doctor Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="theme-color" content="#0b1020" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <link rel="apple-touch-icon" href="images/icon-192.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- ================= SPLASH / CAPA ================= -->
<div id="splashScreen" class="splash">
  <img src="images/capa.jpg" alt="Emergency Doctor Simulator" />
  <div class="splashHint">Toque para iniciar</div>
</div>

<script>
  const splash = document.getElementById("splashScreen");
  ["click","touchstart","pointerdown"].forEach(evt=>{
    splash.addEventListener(evt, ()=>{
      splash.remove();
    }, { once:true });
  });
</script>

<div class="app">

<!-- ================= TOPBAR ================= -->
<header class="topbar">
  <div>
    <div class="brand-title">Emergency Doctor Simulator</div>
    <div class="brand-sub">Simulador de Pronto-Socorro</div>
  </div>
  <div class="top-actions">
    <button id="btnRanking" class="btn">Ranking</button>
    <button id="btnHelp" class="btn">Ajuda</button>
  </div>
</header>

<!-- ================= HOME ================= -->
<section class="screen active" data-screen="home">
  <div class="panel">
    <h1>Bem-vindo(a), Doutor(a)</h1>
    <p>Atenda casos reais, solicite exames e tome decisões clínicas.</p>
    <button id="btnNewGame" class="btn primary">Novo jogo</button>
    <button id="btnContinue" class="btn">Continuar</button>
  </div>
</section>

<!-- ================= PERFIL ================= -->
<section class="screen" data-screen="profile">
  <div class="panel">
    <h2>Criar Perfil</h2>
    <input id="inputName" placeholder="Seu nome" />
    <div class="avatarGrid">
      <button class="avatarCard" data-avatar="images/avatar1.png"><img src="images/avatar1.png"></button>
      <button class="avatarCard" data-avatar="images/avatar2.png"><img src="images/avatar2.png"></button>
      <button class="avatarCard" data-avatar="images/avatar3.png"><img src="images/avatar3.png"></button>
    </div>
    <button id="btnStartGame" class="btn primary">Entrar</button>
  </div>
</section>

<!-- ================= CONSULTÓRIO ================= -->
<section class="screen" data-screen="office">
  <div class="panel consultorioPanel">
    <div class="officeHeader">
      <div class="officeLeft">
        <img id="uiAvatar" class="officeAvatar" />
        <div>
          <div id="uiName"></div>
          <div id="uiRank"></div>
        </div>
      </div>
      <div class="timer">⏱️ <span id="caseTimer">00:00</span></div>
    </div>

    <div class="stats">
      <div>Pontos: <b id="uiPoints">0</b></div>
      <div>Casos: <b id="uiCases">0</b></div>
      <div>Óbitos: <b id="uiDeaths">0</b></div>
    </div>

    <button id="btnNextCase" class="btn primary">Iniciar Plantão</button>
  </div>
</section>

<!-- ================= ATENDIMENTO ================= -->
<section class="screen" data-screen="case">
  <div class="panel">
    <h2 id="caseTitle">Caso Clínico</h2>

    <div class="caseCard">
      <div class="caseLine" id="caseStatus"></div>
      <div class="caseLine"><b>Sinais vitais:</b> <span id="caseVitals"></span></div>
    </div>

    <div style="margin-top:14px; display:flex; gap:10px;">
      <button id="btnExams" class="btn primary">Solicitar Exames</button>
      <button id="btnFinalize" class="btn">Finalizar Atendimento</button>
    </div>
  </div>
</section>

<!-- ================= EXAMES ================= -->
<section class="screen" data-screen="exams">
  <div class="panel">
    <h2>Solicitar Exames</h2>
    <div id="examList"></div>

    <div style="margin-top:14px;">
      <button id="btnBackCase" class="btn">Voltar</button>
    </div>
  </div>
</section>

<!-- ================= RESULTADOS ================= -->
<section class="screen" data-screen="results">
  <div class="panel">
    <h2>Resultados dos Exames</h2>
    <div id="examResults"></div>

    <button id="btnReturnCase" class="btn primary">Voltar ao Caso</button>
  </div>
</section>

<!-- ================= MODAIS ================= -->
<div id="rankingModal" class="modal hidden">
  <div class="modalCard">
    <h2>Ranking</h2>
    <div id="rankingList"></div>
    <button onclick="this.closest('.modal').classList.add('hidden')" class="btn">Fechar</button>
  </div>
</div>

<div id="helpModal" class="modal hidden">
  <div class="modalCard">
    <h2>Ajuda</h2>
    <p>Solicite exames relevantes, evite atrasos e salve vidas.</p>
    <button onclick="this.closest('.modal').classList.add('hidden')" class="btn">Fechar</button>
  </div>
</div>

</div>

<!-- JS -->
<script src="script.js"></script>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>

</body>
</html>
